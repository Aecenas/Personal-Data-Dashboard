import { AppLanguage } from './types';

type TranslationMap = Record<string, string>;
type TranslationParams = Record<string, string | number>;

const translations: Record<AppLanguage, TranslationMap> = {
  'en-US': {
    'common.all': 'All',
    'common.noData': 'No Data',
    'common.loading': 'Loading...',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.back': 'Back',
    'common.next': 'Next',
    'sidebar.dashboard': 'Dashboard',
    'sidebar.diagnostics': 'Diagnostics',
    'sidebar.recycleBin': 'Recycle Bin',
    'sidebar.settings': 'Settings',
    'dashboard.subtitle': 'Personal Data & Scripts Dashboard',
    'dashboard.doneEditing': 'Done Editing',
    'dashboard.refreshAll': 'Refresh All',
    'dashboard.editLayout': 'Edit Layout',
    'dashboard.addCard': 'Add Card',
    'dashboard.addSection': 'Add Section',
    'dashboard.layoutEditHint':
      'Layout edit mode: click a card first, then use arrow keys to move it.',
    'dashboard.layoutEditSelected': 'Selected card: {title}',
    'dashboard.layoutEditNoSelection': 'No card selected in this group.',
    'dashboard.sectionPickGroup': 'Select a specific group before adding a section.',
    'dashboard.sectionDefaultTitle': 'Section {index}',
    'dashboard.sectionRowPrompt': 'Insert after row number (e.g. 3 means between row 3 and row 4)',
    'dashboard.sectionInvalidRow': 'Row number must be an integer >= 0.',
    'dashboard.sectionTitlePrompt': 'Section title',
    'dashboard.sectionColorPrompt': 'Line color (primary/red/green/blue/amber)',
    'dashboard.sectionStylePrompt': 'Line style (dashed/solid)',
    'dashboard.sectionInvalidWidth': 'Line width must be an integer from 1 to 4.',
    'dashboard.sectionDialogCreateTitle': 'Add Section',
    'dashboard.sectionDialogEditTitle': 'Edit Section',
    'dashboard.sectionFormRow': 'Insert After Row (0 = above first row)',
    'dashboard.sectionFormTitle': 'Text',
    'dashboard.sectionFormColor': 'Line Color',
    'dashboard.sectionFormStyle': 'Line Style',
    'dashboard.sectionFormWidth': 'Line Width',
    'dashboard.sectionFormAlign': 'Text Align',
    'dashboard.sectionAlignLeft': 'Left',
    'dashboard.sectionAlignCenter': 'Center',
    'dashboard.sectionAlignRight': 'Right',
    'dashboard.sectionDeleteConfirm': 'Delete this section divider?',
    'dashboard.noMetricsInGroup': 'No metrics found in this group.',
    'dashboard.createFirstCard': 'Create your first card',
    'recycle.title': 'Recycle Bin',
    'recycle.description':
      'Manage deleted cards. Restore them to the dashboard or permanently delete them.',
    'recycle.clearBin': 'Clear Bin',
    'recycle.binEmpty': 'Bin is empty',
    'recycle.cardTitle': 'Card Title',
    'recycle.originalGroup': 'Original Group',
    'recycle.deletedAt': 'Deleted At',
    'recycle.actions': 'Actions',
    'recycle.restore': 'Restore',
    'recycle.deleteForever': 'Delete Forever',
    'recycle.permanentWarning': 'Items deleted forever cannot be recovered.',
    'recycle.confirmClear': 'Clear the recycle bin? This action cannot be undone.',
    'recycle.confirmDelete': 'Permanently delete this card?',
    'settings.title': 'Settings',
    'settings.description': 'Manage application preferences.',
    'settings.appearance': 'Appearance',
    'settings.theme': 'Theme',
    'settings.themeDesc': 'Select your preferred color scheme.',
    'settings.light': 'Light',
    'settings.dark': 'Dark',
    'settings.language': 'Language',
    'settings.languageDesc': 'Choose the language used across the application.',
    'settings.dashboardColumns': 'Dashboard Columns',
    'settings.dashboardColumnsDesc': 'Set dashboard column count (2 to 6).',
    'settings.adaptiveWindow': 'Adaptive Window Size',
    'settings.adaptiveWindowDesc':
      'Automatically adjusts window size to fit different monitor resolutions and scaling.',
    'settings.languageEnglish': 'English',
    'settings.languageChinese': 'Simplified Chinese',
    'settings.storage': 'Storage',
    'settings.dataLocation': 'Data Location',
    'settings.dataLocationDesc': 'Where your metrics configuration is stored.',
    'settings.changeFolder': 'Change Folder',
    'settings.resetToDefault': 'Reset to Default',
    'settings.pathChangeNote':
      'Note: Changing this will move your existing user_settings.json to the new location.',
    'settings.pythonRuntime': 'Python Runtime',
    'settings.notifications': 'Notifications',
    'settings.notificationPermission': 'Desktop Notification Permission',
    'settings.notificationPermissionDesc':
      'Request notification permission from macOS and verify whether local notifications can be delivered.',
    'settings.notificationPermissionCurrent': 'Current status:',
    'settings.notificationPermissionGranted': 'Granted',
    'settings.notificationPermissionDenied': 'Denied',
    'settings.notificationPermissionDefault': 'Not Requested',
    'settings.notificationPermissionUnsupported': 'Unsupported in browser mode',
    'settings.requestNotificationPermission': 'Request Permission',
    'settings.requestingNotificationPermission': 'Requesting...',
    'settings.sendTestNotification': 'Send Test Notification',
    'settings.sendingTestNotification': 'Sending...',
    'settings.notificationPermissionGrantedHint': 'Permission granted. You can now send test notifications.',
    'settings.notificationPermissionDeniedHint':
      'Permission denied. Enable notifications in macOS System Settings > Notifications.',
    'settings.testNotificationTitle': 'MyMetrics Test Notification',
    'settings.testNotificationBody': 'If you can see this, local desktop notifications are working.',
    'settings.testNotificationSent': 'Test notification sent.',
    'settings.testNotificationFailed':
      'Notification was not sent. Please re-check permission and focus/do-not-disturb settings.',
    'settings.defaultInterpreterPath': 'Default Interpreter Path (Optional)',
    'settings.defaultInterpreterDesc':
      'Leave empty to use system defaults (macOS/Linux: python3, Windows: python/py -3).',
    'settings.maxConcurrentRuns': 'Max Concurrent Script Runs',
    'settings.maxConcurrentRunsDesc':
      'Limit script processes running at the same time ({min} to {max}). Lower values reduce CPU and memory spikes.',
    'settings.historyLimit': 'Per-card History Limit',
    'settings.historyLimitDesc': 'Maximum execution history entries kept per card ({min} to {max}).',
    'settings.historyLimitHint': 'Applied immediately. Older entries are trimmed.',
    'settings.executionPriority': 'Execution priority',
    'settings.priorityCard': '1. Card-level interpreter path (if set)',
    'settings.priorityDefault': '2. Default interpreter path in settings (if set)',
    'settings.prioritySystem': '3. System default python command',
    'settings.scriptOutputFormat':
      'Script must output JSON to STDOUT: { "type": "scalar|series|status|gauge", "data": {...} }',
    'settings.selectDataFolder': 'Select Data Folder',
    'diagnostics.title': 'Diagnostics',
    'diagnostics.description': 'Review recent execution runs, success rates, and slow or failing cards.',
    'diagnostics.filters.card': 'Card',
    'diagnostics.filters.cardAll': 'All cards',
    'diagnostics.filters.status': 'Status',
    'diagnostics.filters.statusAll': 'All statuses',
    'diagnostics.filters.statusSuccess': 'Success',
    'diagnostics.filters.statusFailed': 'Failed',
    'diagnostics.filters.statusTimeout': 'Timeout',
    'diagnostics.recent.title': 'Recent Executions',
    'diagnostics.recent.description': 'Latest run history across cards.',
    'diagnostics.recent.empty': 'No execution records matched current filters.',
    'diagnostics.recent.time': 'Time',
    'diagnostics.recent.card': 'Card',
    'diagnostics.recent.status': 'Status',
    'diagnostics.recent.duration': 'Duration',
    'diagnostics.recent.exitCode': 'Exit Code',
    'diagnostics.recent.error': 'Error Summary',
    'diagnostics.status.success': 'Success',
    'diagnostics.status.failed': 'Failed',
    'diagnostics.status.timeout': 'Timeout',
    'diagnostics.cards.title': 'Card Success & Latency',
    'diagnostics.cards.description': 'Per-card success rate and timing statistics.',
    'diagnostics.cards.empty': 'No cards have execution history yet.',
    'diagnostics.cards.card': 'Card',
    'diagnostics.cards.runs': 'Runs',
    'diagnostics.cards.successRate': 'Success Rate',
    'diagnostics.cards.avgDuration': 'Avg Duration',
    'diagnostics.cards.p50Duration': 'P50 Duration',
    'diagnostics.cards.p90Duration': 'P90 Duration',
    'diagnostics.failures.title': 'Failing Cards',
    'diagnostics.failures.description': 'Cards sorted by failure count.',
    'diagnostics.failures.empty': 'No failures recorded.',
    'diagnostics.failures.card': 'Card',
    'diagnostics.failures.failedRuns': 'Failed Runs',
    'diagnostics.failures.failureRate': 'Failure Rate',
    'diagnostics.failures.lastFailure': 'Last Failure',
    'storage.path.default': 'Default (App Data Folder)',
    'storage.path.browser': 'Browser Memory',
    'cardShell.never': 'Never',
    'cardShell.refresh': 'Refresh',
    'cardShell.edit': 'Edit',
    'cardShell.history': 'History',
    'cardShell.delete': 'Delete',
    'cardShell.executionError': 'Execution Error',
    'cardShell.scriptExecutionFailed': 'Script execution failed',
    'cardShell.refreshing': 'Refreshing...',
    'cardShell.thresholdAlertTriggered': 'Threshold alert triggered in latest refresh',
    'cardHistory.title': 'Execution History',
    'cardHistory.description': '{cardTitle} · {total} records (limit {limit})',
    'cardHistory.empty': 'No execution history for this card yet.',
    'cardHistory.time': 'Time',
    'cardHistory.status': 'Status',
    'cardHistory.duration': 'Duration',
    'cardHistory.exitCode': 'Exit Code',
    'cardHistory.error': 'Error Summary',
    'cardHistory.pageInfo': 'Page {page} / {total}',
    'cardHistory.range': '{from}-{to} of {total}',
    'alerts.notificationTitle': 'Card Alert · {cardTitle}',
    'alerts.statusChangedBody': '{cardTitle}: status changed from {from} to {to}',
    'alerts.upperThresholdBody': '{cardTitle}: value {value} is above upper threshold {threshold}',
    'alerts.lowerThresholdBody': '{cardTitle}: value {value} is below lower threshold {threshold}',
    'alerts.state.ok': 'OK',
    'alerts.state.warning': 'Warning',
    'alerts.state.error': 'Error',
    'alerts.state.unknown': 'Unknown',
    'exec.mappingScalarValueMissing': 'Mapping failed: scalar value not found ({path})',
    'exec.mappingXAxisNotArray': 'Mapping failed: x_axis is not an array ({path})',
    'exec.mappingSeriesNotArray': 'Mapping failed: series is not an array ({path})',
    'exec.mappingSeriesValuesNotArray': 'Mapping failed: series[{index}].values is not an array',
    'exec.mappingStatusLabelMissing': 'Mapping failed: status label not found ({path})',
    'exec.mappingGaugeMinMissing': 'Mapping failed: gauge min not found ({path})',
    'exec.mappingGaugeMaxMissing': 'Mapping failed: gauge max not found ({path})',
    'exec.mappingGaugeValueMissing': 'Mapping failed: gauge value not found ({path})',
    'exec.mappingGaugeMinInvalid': 'Mapping failed: gauge min is not a valid number ({path})',
    'exec.mappingGaugeMaxInvalid': 'Mapping failed: gauge max is not a valid number ({path})',
    'exec.mappingGaugeValueInvalid': 'Mapping failed: gauge value is not a valid number ({path})',
    'exec.mappingGaugeRangeInvalid': 'Mapping failed: gauge max ({max}) must be greater than min ({min})',
    'exec.outputNotObject': 'Script output is not a valid JSON object',
    'exec.outputMissingType': 'Script output is missing type',
    'exec.outputMissingData': 'Script output is missing data',
    'exec.outputTypeMismatch': 'Script output type is {outputType}, but card type is {cardType}',
    'exec.notTauri': 'Current runtime is not Tauri; cannot run local Python scripts',
    'exec.timeout': 'Script timed out. Check script logic or increase timeout.',
    'exec.failedWithStderr': 'Script execution failed: {stderr}',
    'exec.failedWithExitCode': 'Script execution failed with exit code {code}',
    'exec.failedGeneric': 'Script execution failed',
    'exec.invalidJson': 'Script output is not valid JSON: {output}',
    'exec.validatePathRequired': 'Script path is required',
    'exec.validatePathExt': 'Script file must end with .py',
    'exec.validateBrowserOnly':
      'Browser mode performs basic validation only. Full validation requires the Tauri desktop app.',
    'wizard.selectPythonScript': 'Select Python Script',
    'wizard.step.info': 'Info',
    'wizard.step.source': 'Source',
    'wizard.step.mapping': 'Mapping',
    'wizard.step.test': 'Test',
    'wizard.editMetric': 'Edit Metric',
    'wizard.addMetric': 'Add New Metric',
    'wizard.subtitle': 'Configure your local Python script as a data source.',
    'wizard.cardTitle': 'Card Title',
    'wizard.cardTitlePlaceholder': 'e.g. GPU Temp',
    'wizard.group': 'Group',
    'wizard.groupPlaceholder': 'Default',
    'wizard.size': 'Size',
    'wizard.visualizationType': 'Visualization Type',
    'wizard.typeScalar': 'Scalar',
    'wizard.typeScalarDesc': 'Single value display',
    'wizard.typeSeries': 'Series',
    'wizard.typeSeriesDesc': 'Line or area chart',
    'wizard.typeStatus': 'Status',
    'wizard.typeStatusDesc': 'Health / state badge',
    'wizard.typeGauge': 'Gauge',
    'wizard.typeGaugeDesc': 'Needle gauge with min/max range',
    'wizard.colorTheme': 'Color Theme',
    'wizard.colorDefault': 'Default',
    'wizard.colorBlue': 'Blue',
    'wizard.colorGreen': 'Green',
    'wizard.colorRed': 'Red',
    'wizard.colorYellow': 'Yellow',
    'wizard.colorPurple': 'Purple',
    'wizard.pythonScriptPath': 'Python Script Path',
    'wizard.pythonScriptPlaceholder': '/path/to/your/script.py',
    'wizard.browse': 'Browse',
    'wizard.scriptArgs': 'Script Args (space separated)',
    'wizard.scriptArgsPlaceholder': '--city beijing',
    'wizard.interpreterPathOptional': 'Interpreter Path (optional)',
    'wizard.interpreterPathPlaceholder': '/usr/bin/python3',
    'wizard.scriptValidationChecking': 'Validating script and interpreter...',
    'wizard.scriptValidationValid': 'Script precheck passed',
    'wizard.scriptValidationInvalid': 'Script precheck failed',
    'wizard.scriptValidationResolved': 'Resolved interpreter: {python}',
    'wizard.scriptValidationResolvedFallback': 'Interpreter resolved (details unavailable).',
    'wizard.refreshInterval': 'Refresh Interval (seconds, 0 = disabled)',
    'wizard.timeout': 'Timeout (ms)',
    'wizard.refreshOnStart': 'Refresh on app start',
    'wizard.refreshOnResume': 'Refresh on app resume',
    'wizard.expectedOutput': 'Expected Output Format',
    'wizard.valueKey': 'Value Key',
    'wizard.unitKey': 'Unit Key',
    'wizard.trendKey': 'Trend Key',
    'wizard.colorKey': 'Color Key',
    'wizard.xAxisKey': 'X Axis Key',
    'wizard.seriesKey': 'Series Key',
    'wizard.seriesNameKey': 'Series Name Key',
    'wizard.seriesValuesKey': 'Series Values Key',
    'wizard.labelKey': 'Label Key',
    'wizard.stateKey': 'State Key',
    'wizard.messageKeyOptional': 'Message Key (optional)',
    'wizard.gaugeMinKey': 'Min Key',
    'wizard.gaugeMaxKey': 'Max Key',
    'wizard.gaugeValueKey': 'Value Key',
    'wizard.gaugeUnitKeyOptional': 'Unit Key (optional)',
    'wizard.mappingHint': 'Mapping fields support dotted paths, for example metrics.cpu.value.',
    'wizard.alerts.title': 'Card Alerts',
    'wizard.alerts.description': 'Configure local alert rules for this card.',
    'wizard.alerts.enabled': 'Enable alerts',
    'wizard.alerts.cooldown': 'Cooldown (seconds)',
    'wizard.alerts.statusModeLabel': 'Status trigger mode',
    'wizard.alerts.statusChange': 'Trigger when status changes',
    'wizard.alerts.upperThreshold': 'Upper Threshold',
    'wizard.alerts.lowerThreshold': 'Lower Threshold',
    'wizard.alerts.thresholdOptional': 'Optional',
    'wizard.alerts.seriesNotSupported': 'Series cards do not support alert conditions in this MVP.',
    'wizard.clickRunTest': 'Click Run Test to generate preview',
    'wizard.testFailed': 'Test Failed',
    'wizard.scalarPreview': 'Scalar Preview',
    'wizard.seriesPreview': 'Series Preview',
    'wizard.statusPreview': 'Status Preview',
    'wizard.gaugePreview': 'Gauge Preview',
    'wizard.points': 'Points: {count}',
    'wizard.seriesCount': 'Series Count: {count}',
    'wizard.testAndPreview': 'Test & Preview',
    'wizard.runTest': 'Run Test',
    'wizard.running': 'Running...',
    'wizard.rawStdout': 'Raw STDOUT',
    'wizard.noOutputYet': 'No output yet',
    'wizard.stderr': 'STDERR',
    'wizard.testPassed': 'Test passed. You can save this card now.',
    'wizard.saveChanges': 'Save Changes',
    'wizard.createCard': 'Create Card',
    'wizard.validation.titleRequired': 'Please enter a card title',
    'wizard.validation.groupRequired': 'Please enter a group name',
    'wizard.validation.scriptPathRequired': 'Please enter a Python script path',
    'wizard.validation.scriptExt': 'Script file must end with .py',
    'wizard.validation.scriptArgsInvalid': 'Script arguments are invalid',
    'wizard.validation.scriptArgsUnclosedQuote':
      'Script arguments contain an unclosed {quote} quote',
    'wizard.validation.scriptChecking': 'Script precheck is still running. Please wait.',
    'wizard.validation.scriptPrecheckPending': 'Run script precheck first.',
    'wizard.validation.scriptPrecheckFailed': 'Script precheck failed. Please fix source settings.',
    'wizard.validation.intervalMin': 'Refresh interval cannot be less than 0',
    'wizard.validation.timeoutMin': 'Timeout should be at least 1000ms',
    'wizard.validation.scalarValue': 'Scalar type requires a value key',
    'wizard.validation.seriesAxes': 'Series type requires x_axis key and series key',
    'wizard.validation.seriesFields': 'Series type requires name key and values key',
    'wizard.validation.statusFields': 'Status type requires label key and state key',
    'wizard.validation.gaugeFields': 'Gauge type requires min key, max key and value key',
    'wizard.validation.alertCooldownMin': 'Alert cooldown cannot be less than 0',
    'wizard.validation.alertUpperNumber': 'Upper threshold must be a valid number',
    'wizard.validation.alertLowerNumber': 'Lower threshold must be a valid number',
    'wizard.validation.alertThresholdRequired':
      'Scalar/Gauge alerts require at least one threshold when alerts are enabled',
    'wizard.validation.alertThresholdRange':
      'Lower threshold cannot be greater than upper threshold',
  },
  'zh-CN': {
    'common.all': '全部',
    'common.noData': '暂无数据',
    'common.loading': '加载中...',
    'common.save': '保存',
    'common.cancel': '取消',
    'common.back': '返回',
    'common.next': '下一步',
    'sidebar.dashboard': '仪表盘',
    'sidebar.diagnostics': '诊断',
    'sidebar.recycleBin': '回收站',
    'sidebar.settings': '设置',
    'dashboard.subtitle': '个人数据与脚本仪表盘',
    'dashboard.doneEditing': '完成编辑',
    'dashboard.refreshAll': '全部刷新',
    'dashboard.editLayout': '编辑布局',
    'dashboard.addCard': '添加卡片',
    'dashboard.addSection': '添加分段',
    'dashboard.layoutEditHint': '布局编辑模式：先点击卡片，再用方向键移动。',
    'dashboard.layoutEditSelected': '当前选中：{title}',
    'dashboard.layoutEditNoSelection': '当前分组没有可编辑的卡片。',
    'dashboard.sectionPickGroup': '请先切换到具体分组，再添加分段。',
    'dashboard.sectionDefaultTitle': '分段 {index}',
    'dashboard.sectionRowPrompt': '请输入插入在第几行之后（如 3 表示第 3 行和第 4 行之间）',
    'dashboard.sectionInvalidRow': '行号必须是大于等于 0 的整数。',
    'dashboard.sectionTitlePrompt': '分段标题',
    'dashboard.sectionColorPrompt': '线条颜色（primary/red/green/blue/amber）',
    'dashboard.sectionStylePrompt': '线条样式（dashed/solid）',
    'dashboard.sectionInvalidWidth': '线条粗细必须是 1 到 4 的整数。',
    'dashboard.sectionDialogCreateTitle': '添加分段',
    'dashboard.sectionDialogEditTitle': '编辑分段',
    'dashboard.sectionFormRow': '插入在第几行之后（0=第一排上方）',
    'dashboard.sectionFormTitle': '文字',
    'dashboard.sectionFormColor': '线条颜色',
    'dashboard.sectionFormStyle': '线条样式',
    'dashboard.sectionFormWidth': '线条粗细',
    'dashboard.sectionFormAlign': '文字对齐',
    'dashboard.sectionAlignLeft': '靠左',
    'dashboard.sectionAlignCenter': '居中',
    'dashboard.sectionAlignRight': '靠右',
    'dashboard.sectionDeleteConfirm': '确认删除这个分段线吗？',
    'dashboard.noMetricsInGroup': '该分组暂无指标。',
    'dashboard.createFirstCard': '创建第一张卡片',
    'recycle.title': '回收站',
    'recycle.description': '管理已删除卡片。可恢复到仪表盘，或永久删除。',
    'recycle.clearBin': '清空回收站',
    'recycle.binEmpty': '回收站为空',
    'recycle.cardTitle': '卡片标题',
    'recycle.originalGroup': '原分组',
    'recycle.deletedAt': '删除时间',
    'recycle.actions': '操作',
    'recycle.restore': '恢复',
    'recycle.deleteForever': '永久删除',
    'recycle.permanentWarning': '被永久删除的项目无法恢复。',
    'recycle.confirmClear': '确认清空回收站吗？该操作不可撤销。',
    'recycle.confirmDelete': '确认彻底删除这张卡片吗？',
    'settings.title': '设置',
    'settings.description': '管理应用偏好配置。',
    'settings.appearance': '外观',
    'settings.theme': '主题',
    'settings.themeDesc': '选择你偏好的颜色主题。',
    'settings.light': '浅色',
    'settings.dark': '深色',
    'settings.language': '语言',
    'settings.languageDesc': '选择整个应用使用的语言。',
    'settings.dashboardColumns': '仪表盘列数',
    'settings.dashboardColumnsDesc': '设置仪表盘列数（2 到 6 列）。',
    'settings.adaptiveWindow': '自适应窗口大小',
    'settings.adaptiveWindowDesc': '根据当前显示器分辨率与缩放，自动调整窗口尺寸。',
    'settings.languageEnglish': '英文',
    'settings.languageChinese': '简体中文',
    'settings.storage': '存储',
    'settings.dataLocation': '数据位置',
    'settings.dataLocationDesc': '指标配置文件的存储路径。',
    'settings.changeFolder': '更换目录',
    'settings.resetToDefault': '恢复默认',
    'settings.pathChangeNote': '注意：切换后会把现有 user_settings.json 迁移到新位置。',
    'settings.pythonRuntime': 'Python 运行时',
    'settings.notifications': '通知',
    'settings.notificationPermission': '桌面通知权限',
    'settings.notificationPermissionDesc': '向 macOS 请求通知权限，并验证本地通知是否可达。',
    'settings.notificationPermissionCurrent': '当前状态：',
    'settings.notificationPermissionGranted': '已授权',
    'settings.notificationPermissionDenied': '已拒绝',
    'settings.notificationPermissionDefault': '未请求',
    'settings.notificationPermissionUnsupported': '浏览器模式不支持',
    'settings.requestNotificationPermission': '请求权限',
    'settings.requestingNotificationPermission': '请求中...',
    'settings.sendTestNotification': '发送测试通知',
    'settings.sendingTestNotification': '发送中...',
    'settings.notificationPermissionGrantedHint': '权限已授权，现在可以发送测试通知。',
    'settings.notificationPermissionDeniedHint': '权限被拒绝，请到 macOS 系统设置 > 通知 中开启。',
    'settings.testNotificationTitle': 'MyMetrics 测试通知',
    'settings.testNotificationBody': '如果你能看到这条通知，说明本地桌面通知正常。',
    'settings.testNotificationSent': '测试通知已发送。',
    'settings.testNotificationFailed': '通知未发送，请检查权限与专注模式/勿扰设置。',
    'settings.defaultInterpreterPath': '默认解释器路径（可选）',
    'settings.defaultInterpreterDesc':
      '留空时使用系统默认命令（macOS/Linux: python3，Windows: python/py -3）。',
    'settings.maxConcurrentRuns': '脚本最大并发数',
    'settings.maxConcurrentRunsDesc': '限制脚本同时运行数量（{min} 到 {max}）。值越小越能降低 CPU 和内存峰值。',
    'settings.historyLimit': '单卡历史上限',
    'settings.historyLimitDesc': '每张卡片最多保留多少条执行历史（{min} 到 {max}）。',
    'settings.historyLimitHint': '立即生效，超出的旧记录会被裁剪。',
    'settings.executionPriority': '执行优先级',
    'settings.priorityCard': '1. 卡片级解释器路径（如设置）',
    'settings.priorityDefault': '2. 设置中的默认解释器路径（如设置）',
    'settings.prioritySystem': '3. 系统默认 python 命令',
    'settings.scriptOutputFormat':
      '脚本必须输出 JSON 到 STDOUT：{ "type": "scalar|series|status|gauge", "data": {...} }',
    'settings.selectDataFolder': '选择数据目录',
    'diagnostics.title': '执行诊断',
    'diagnostics.description': '查看最近执行记录、成功率以及慢卡片/失败卡片情况。',
    'diagnostics.filters.card': '卡片',
    'diagnostics.filters.cardAll': '全部卡片',
    'diagnostics.filters.status': '状态',
    'diagnostics.filters.statusAll': '全部状态',
    'diagnostics.filters.statusSuccess': '成功',
    'diagnostics.filters.statusFailed': '失败',
    'diagnostics.filters.statusTimeout': '超时',
    'diagnostics.recent.title': '最近执行',
    'diagnostics.recent.description': '跨卡片的最新执行历史。',
    'diagnostics.recent.empty': '当前筛选条件下没有执行记录。',
    'diagnostics.recent.time': '时间',
    'diagnostics.recent.card': '卡片',
    'diagnostics.recent.status': '状态',
    'diagnostics.recent.duration': '耗时',
    'diagnostics.recent.exitCode': '退出码',
    'diagnostics.recent.error': '错误摘要',
    'diagnostics.status.success': '成功',
    'diagnostics.status.failed': '失败',
    'diagnostics.status.timeout': '超时',
    'diagnostics.cards.title': '每卡成功率与耗时',
    'diagnostics.cards.description': '按卡片统计成功率与执行耗时。',
    'diagnostics.cards.empty': '暂无卡片执行历史。',
    'diagnostics.cards.card': '卡片',
    'diagnostics.cards.runs': '执行次数',
    'diagnostics.cards.successRate': '成功率',
    'diagnostics.cards.avgDuration': '平均耗时',
    'diagnostics.cards.p50Duration': 'P50 耗时',
    'diagnostics.cards.p90Duration': 'P90 耗时',
    'diagnostics.failures.title': '失败卡片排行',
    'diagnostics.failures.description': '按失败次数排序。',
    'diagnostics.failures.empty': '暂无失败记录。',
    'diagnostics.failures.card': '卡片',
    'diagnostics.failures.failedRuns': '失败次数',
    'diagnostics.failures.failureRate': '失败率',
    'diagnostics.failures.lastFailure': '最近失败',
    'storage.path.default': '默认（应用数据目录）',
    'storage.path.browser': '浏览器内存',
    'cardShell.never': '从未',
    'cardShell.refresh': '刷新',
    'cardShell.edit': '编辑',
    'cardShell.history': '历史',
    'cardShell.delete': '删除',
    'cardShell.executionError': '执行错误',
    'cardShell.scriptExecutionFailed': '脚本执行失败',
    'cardShell.refreshing': '刷新中...',
    'cardShell.thresholdAlertTriggered': '最近一次刷新命中阈值告警',
    'cardHistory.title': '执行历史',
    'cardHistory.description': '{cardTitle} · 共 {total} 条（上限 {limit}）',
    'cardHistory.empty': '这张卡片还没有执行历史。',
    'cardHistory.time': '时间',
    'cardHistory.status': '状态',
    'cardHistory.duration': '耗时',
    'cardHistory.exitCode': '退出码',
    'cardHistory.error': '错误摘要',
    'cardHistory.pageInfo': '第 {page} / {total} 页',
    'cardHistory.range': '{from}-{to} / {total}',
    'alerts.notificationTitle': '卡片告警 · {cardTitle}',
    'alerts.statusChangedBody': '{cardTitle}：状态从 {from} 变为 {to}',
    'alerts.upperThresholdBody': '{cardTitle}：当前值 {value} 超过上阈值 {threshold}',
    'alerts.lowerThresholdBody': '{cardTitle}：当前值 {value} 低于下阈值 {threshold}',
    'alerts.state.ok': '正常',
    'alerts.state.warning': '警告',
    'alerts.state.error': '错误',
    'alerts.state.unknown': '未知',
    'exec.mappingScalarValueMissing': '字段映射失败：未找到 scalar value（{path}）',
    'exec.mappingXAxisNotArray': '字段映射失败：x_axis 不是数组（{path}）',
    'exec.mappingSeriesNotArray': '字段映射失败：series 不是数组（{path}）',
    'exec.mappingSeriesValuesNotArray': '字段映射失败：series[{index}].values 不是数组',
    'exec.mappingStatusLabelMissing': '字段映射失败：未找到 status label（{path}）',
    'exec.mappingGaugeMinMissing': '字段映射失败：未找到 gauge min（{path}）',
    'exec.mappingGaugeMaxMissing': '字段映射失败：未找到 gauge max（{path}）',
    'exec.mappingGaugeValueMissing': '字段映射失败：未找到 gauge value（{path}）',
    'exec.mappingGaugeMinInvalid': '字段映射失败：gauge min 不是合法数字（{path}）',
    'exec.mappingGaugeMaxInvalid': '字段映射失败：gauge max 不是合法数字（{path}）',
    'exec.mappingGaugeValueInvalid': '字段映射失败：gauge value 不是合法数字（{path}）',
    'exec.mappingGaugeRangeInvalid': '字段映射失败：gauge max（{max}）必须大于 min（{min}）',
    'exec.outputNotObject': '脚本输出不是有效 JSON 对象',
    'exec.outputMissingType': '脚本输出缺少 type 字段',
    'exec.outputMissingData': '脚本输出缺少 data 字段',
    'exec.outputTypeMismatch': '脚本输出类型为 {outputType}，与卡片类型 {cardType} 不一致',
    'exec.notTauri': '当前运行环境不是 Tauri，无法调用本地 Python 脚本',
    'exec.timeout': '脚本执行超时，请检查脚本逻辑或增大超时时间。',
    'exec.failedWithStderr': '脚本执行失败：{stderr}',
    'exec.failedWithExitCode': '脚本执行失败，退出码 {code}',
    'exec.failedGeneric': '脚本执行失败',
    'exec.invalidJson': '脚本输出不是合法 JSON：{output}',
    'exec.validatePathRequired': '脚本路径不能为空',
    'exec.validatePathExt': '脚本文件必须以 .py 结尾',
    'exec.validateBrowserOnly': '浏览器模式下仅做基础校验，完整校验需在 Tauri 桌面端进行',
    'wizard.selectPythonScript': '选择 Python 脚本',
    'wizard.step.info': '信息',
    'wizard.step.source': '来源',
    'wizard.step.mapping': '映射',
    'wizard.step.test': '测试',
    'wizard.editMetric': '编辑指标',
    'wizard.addMetric': '新增指标',
    'wizard.subtitle': '将本地 Python 脚本配置为数据源。',
    'wizard.cardTitle': '卡片标题',
    'wizard.cardTitlePlaceholder': '例如：GPU 温度',
    'wizard.group': '分组',
    'wizard.groupPlaceholder': '默认',
    'wizard.size': '尺寸',
    'wizard.visualizationType': '可视化类型',
    'wizard.typeScalar': '标量',
    'wizard.typeScalarDesc': '单值展示',
    'wizard.typeSeries': '序列',
    'wizard.typeSeriesDesc': '折线/面积图',
    'wizard.typeStatus': '状态',
    'wizard.typeStatusDesc': '健康状态徽标',
    'wizard.typeGauge': '仪表盘',
    'wizard.typeGaugeDesc': '带 min/max 范围的指针仪表盘',
    'wizard.colorTheme': '颜色主题',
    'wizard.colorDefault': '默认',
    'wizard.colorBlue': '蓝色',
    'wizard.colorGreen': '绿色',
    'wizard.colorRed': '红色',
    'wizard.colorYellow': '黄色',
    'wizard.colorPurple': '紫色',
    'wizard.pythonScriptPath': 'Python 脚本路径',
    'wizard.pythonScriptPlaceholder': '/path/to/your/script.py',
    'wizard.browse': '浏览',
    'wizard.scriptArgs': '脚本参数（空格分隔）',
    'wizard.scriptArgsPlaceholder': '--city beijing',
    'wizard.interpreterPathOptional': '解释器路径（可选）',
    'wizard.interpreterPathPlaceholder': '/usr/bin/python3',
    'wizard.scriptValidationChecking': '正在校验脚本和解释器...',
    'wizard.scriptValidationValid': '脚本预校验通过',
    'wizard.scriptValidationInvalid': '脚本预校验失败',
    'wizard.scriptValidationResolved': '已解析解释器：{python}',
    'wizard.scriptValidationResolvedFallback': '解释器已解析（未返回具体信息）。',
    'wizard.refreshInterval': '刷新间隔（秒，0 表示禁用）',
    'wizard.timeout': '超时时间（毫秒）',
    'wizard.refreshOnStart': '应用启动时刷新',
    'wizard.refreshOnResume': '应用恢复时刷新',
    'wizard.expectedOutput': '期望输出格式',
    'wizard.valueKey': 'Value 键',
    'wizard.unitKey': 'Unit 键',
    'wizard.trendKey': 'Trend 键',
    'wizard.colorKey': 'Color 键',
    'wizard.xAxisKey': 'X Axis 键',
    'wizard.seriesKey': 'Series 键',
    'wizard.seriesNameKey': 'Series Name 键',
    'wizard.seriesValuesKey': 'Series Values 键',
    'wizard.labelKey': 'Label 键',
    'wizard.stateKey': 'State 键',
    'wizard.messageKeyOptional': 'Message 键（可选）',
    'wizard.gaugeMinKey': 'Min 键',
    'wizard.gaugeMaxKey': 'Max 键',
    'wizard.gaugeValueKey': 'Value 键',
    'wizard.gaugeUnitKeyOptional': 'Unit 键（可选）',
    'wizard.mappingHint': '映射字段支持点路径，例如 metrics.cpu.value。',
    'wizard.alerts.title': '卡片告警',
    'wizard.alerts.description': '配置这张卡片的本地告警规则。',
    'wizard.alerts.enabled': '开启告警',
    'wizard.alerts.cooldown': '冷却时间（秒）',
    'wizard.alerts.statusModeLabel': '状态触发模式',
    'wizard.alerts.statusChange': '状态变化时触发',
    'wizard.alerts.upperThreshold': '上阈值',
    'wizard.alerts.lowerThreshold': '下阈值',
    'wizard.alerts.thresholdOptional': '可选',
    'wizard.alerts.seriesNotSupported': '当前 MVP 中，series 卡不支持告警条件。',
    'wizard.clickRunTest': '点击“运行测试”生成预览',
    'wizard.testFailed': '测试失败',
    'wizard.scalarPreview': '标量预览',
    'wizard.seriesPreview': '序列预览',
    'wizard.statusPreview': '状态预览',
    'wizard.gaugePreview': '仪表盘预览',
    'wizard.points': '点数：{count}',
    'wizard.seriesCount': '序列数量：{count}',
    'wizard.testAndPreview': '测试与预览',
    'wizard.runTest': '运行测试',
    'wizard.running': '运行中...',
    'wizard.rawStdout': '原始 STDOUT',
    'wizard.noOutputYet': '暂无输出',
    'wizard.stderr': 'STDERR',
    'wizard.testPassed': '测试通过。现在可以保存这张卡片。',
    'wizard.saveChanges': '保存修改',
    'wizard.createCard': '创建卡片',
    'wizard.validation.titleRequired': '请填写卡片标题',
    'wizard.validation.groupRequired': '请填写分组名称',
    'wizard.validation.scriptPathRequired': '请填写 Python 脚本路径',
    'wizard.validation.scriptExt': '脚本文件必须是 .py',
    'wizard.validation.scriptArgsInvalid': '脚本参数格式无效',
    'wizard.validation.scriptArgsUnclosedQuote': '脚本参数中存在未闭合的 {quote} 引号',
    'wizard.validation.scriptChecking': '脚本预校验进行中，请稍候。',
    'wizard.validation.scriptPrecheckPending': '请先完成脚本预校验。',
    'wizard.validation.scriptPrecheckFailed': '脚本预校验失败，请先修复来源配置。',
    'wizard.validation.intervalMin': '刷新间隔不能小于 0',
    'wizard.validation.timeoutMin': '超时时间建议至少 1000ms',
    'wizard.validation.scalarValue': 'scalar 类型必须设置 value key',
    'wizard.validation.seriesAxes': 'series 类型必须设置 x_axis key 与 series key',
    'wizard.validation.seriesFields': 'series 类型必须设置 name key 与 values key',
    'wizard.validation.statusFields': 'status 类型必须设置 label key 与 state key',
    'wizard.validation.gaugeFields': 'gauge 类型必须设置 min key、max key 与 value key',
    'wizard.validation.alertCooldownMin': '告警冷却时间不能小于 0',
    'wizard.validation.alertUpperNumber': '上阈值必须是合法数字',
    'wizard.validation.alertLowerNumber': '下阈值必须是合法数字',
    'wizard.validation.alertThresholdRequired': '开启告警后，scalar/gauge 至少要配置一个阈值',
    'wizard.validation.alertThresholdRange': '下阈值不能大于上阈值',
  },
};

export const t = (
  language: AppLanguage,
  key: string,
  params: TranslationParams = {},
): string => {
  const template = translations[language][key] ?? translations['en-US'][key] ?? key;

  return Object.entries(params).reduce(
    (acc, [name, value]) => acc.replace(new RegExp(`\\{${name}\\}`, 'g'), String(value)),
    template,
  );
};
